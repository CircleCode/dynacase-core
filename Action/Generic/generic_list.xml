<!DOCTYPE html>
<html>
<head>

    <title>[TEXT: folder containt]</title>

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=100"/>

    <link rel="shortcut icon" href="[DYNACASE_FAVICO]"/>
    <link rel="stylesheet" type="text/css" href="[CORE_SSTANDURL]app=FDL&amp;action=ALLVIEWCSS&amp;wv=[WVERSION]"/>
    [CSS:REF]
    <style type="text/css">[CSS:CODE]</style>
    [JS:REF]
    <script>
        <!--
        [JS:CODE]
        document.dirid = '[dirid]';

        document.needreload = true;
        var prevselid;

        // view select document
        function vselect(th) {
            if (prevselid)  document.getElementById(prevselid).setAttribute("selected", 0);
            th.setAttribute("selected", 1);
            prevselid = th.id;
        }
        function vedit(e, id) {
            if (!e) e = window.event;

            if (e.ctrlKey) {
                subwindow([FDL_VD2SIZE], [FDL_HD2SIZE], 'fedit' + id, '[CORE_STANDURL]&app=GENERIC&action=GENERIC_EDIT&latest=Y&id=' + id);
            } else {
                subwindow([FDL_VD2SIZE], [FDL_HD2SIZE], 'finfo[famid]', '[CORE_STANDURL]&app=GENERIC&action=GENERIC_EDIT&&latest=Y&id=' + id);
            }
        }
        var catgid = parseInt('[catg]');

        var PDS = '';
        function KeySendSimpleSearch(e) {
            var keyCode;

            if (window.event) keyCode = window.event.keyCode;
            else keyCode = e.which;

            if (keyCode == 13) {
                SendSimpleSearch(e)
            }
        }
        function SendSimpleSearch(event) {
            var isreport = false;
            var isparam = false;

            var did = document.getElementById('csid');
            var fldid = [folderid];
            var key = document.getElementById('searchkey').value;
            var mode = document.getElementById('searchmode').value;
            var dmainid = document.getElementById('cellmain');
            var pds = '[pds]';

            if (did) {
                fldid = did.options[did.selectedIndex].value;
                isreport = (did.options[did.selectedIndex].getAttribute('isreport') == '1');
                isparam = (did.options[did.selectedIndex].getAttribute('isparam') == '1');
            }
            if (isreport) {
                subwindow([FDL_VD2SIZE], [FDL_HD2SIZE], 'finfo[famid]', '[CORE_STANDURL]&app=FDL&action=FDL_CARD&dochead=Y&latest=Y&id=' + fldid);
            } else {
                if (isparam) {
                    if (fldid != parseInt('[catg]', 10)) {

                        key = false;
                        document.getElementById('searchkey').value = '';
                    } else {
                        if (key == '') pds = '';
                    }
                }

                if (dmainid) {
                    dmainid.innerHTML = '<img  src="Images/loading.gif" style="background-color:#FFFFFF;border:groove black 2px;padding:4px;-moz-border-radius:4px">';
                    dmainid.style.textAlign = 'center';
                }
                if ((fldid > 0) && (!key)) document.location.replace('[CORE_STANDURL]app=[APPNAME]&action=GENERIC_TAB&onefam=[ONEFAMORIGIN]&tab=0&clearkey=Y&famid=[famid]&catg=' + fldid + '&dirid=' + fldid + pds);
                else if (key)  document.location.replace('[CORE_STANDURL]app=[APPNAME]&onefam=[ONEFAMORIGIN]&action=GENERIC_SEARCH&famid=[famid]&dirid=[dirid]&catg=' + fldid + pds + '&keyword=' + key + '&mode=' + mode);
                else document.location.replace('[CORE_STANDURL]app=[APPNAME]&action=GENERIC_TAB&tab=0&onefam=[ONEFAMORIGIN]&famid=[famid]&catg=-1&clearkey=Y');
            }
            return true;
        }

        function changeMode(o) {
            var mode = document.getElementById('searchmode').value;
            if (mode == 'FULL') {
                document.getElementById('searchmode').value = 'REGEXP';
                o.value = '~';
                o.title = "[TEXT:Search containing characters]";
            } else {
                document.getElementById('searchmode').value = 'FULL';
                o.title = "[TEXT:Search Words]";
                o.value = '*';
            }
        }
        function focusInput(event, did) {
            var i;
            if (did) {
                var isreport = (did.options[did.selectedIndex].getAttribute('isreport') == '1');
                if (isreport) {
                    SendSimpleSearch(event);
                    i = 0;
                    did.selectedIndex = 0;
                    for (i = 0; i < did.options.length; i++) {
                        if (did.options[i].defaultSelected) did.selectedIndex = i;
                    }
                }
            }
            i = document.getElementById('searchkey');
            try {
                if (i) {
                    i.focus();
                }
            } catch (e) {
            }
        }
        addEvent(window, "load", focusInput);
        addEvent(window, "load", function () {
            if (window.parent && window.parent.multidoc) window.parent.multidoc(window.document);
        });
        function resizeTable() {
            var widthStr = "[ACARD_WIDTH]";
            var index = widthStr.indexOf("%");
            var $cellmain = $('#cellmain');
            if (index != -1) {

                var $firstAbstract = $cellmain.children("div:first");

                if ($firstAbstract.length > 0) {
                    var startX = $cellmain.position().left;
                    var percentage = widthStr.substr(0, index);
                    var divWidth = $("#main").width();

                    var delta = $firstAbstract.outerWidth(true) - $firstAbstract.width();
                    if (isIE6) {
                        delta += 10; // because... resize is looping else
                        if (document.body.offsetHeight > document.documentElement.clientHeight) {
                            delta += 10; // add scrollbar width
                        }
                    }
                    var newWidth = ((divWidth * percentage) / 100) - startX - delta;
                    $(".docresume").width(newWidth);
                }
            }
        }
        $(window).on("load resize", resizeTable);
        -->
    </script>
</head>

<body class="freedom">

    [ZONE [APPNAME]:FAMILY_BARMENU?catg=[catg]&onefam=[ONEFAMORIGIN]&famid=[famid]&pds=[pds]]
    [ZONE FDL:POPUPDOCMENU?mzone=GENERIC:POPUPLISTDETAIL%26famid=[famid]]
    <div id="main">

        <input id="searchmode" name="mode" type="hidden" value="REGEXP">
        <input id="searchbutton" class="searchbutton" title="[TEXT:Search containing characters]" type="button" value="~"
       onclick="changeMode(this)">
        [IF FULLMODE]
        <script>changeMode(document.getElementById('searchbutton'))</script>
        [ENDIF FULLMODE]
        <input onMouseUp="return true" onKeyPress="KeySendSimpleSearch(event)" type="text" value="[tkey]" id="searchkey"/>
        [IF ONESEARCH]
        <select id="csid" onchange="focusInput(event,this)">
            <option value="0">-</option>
            [BLOCK SYSSEARCH]
            <option isreport="[isreport]" isparam="[isparam]" style="background-color:[gui_color]" value="[id]" [selected]>[title]</option>
            [ENDBLOCK SYSSEARCH][IF MSEARCH]
            <option style="border-top:solid 1px [COLOR_BLACK];height:2px;font-size:1px" disabled value=""></option>
            [ENDIF MSEARCH]
            [BLOCK USERSEARCH]
            <option isreport="[isreport]" isparam="[isparam]" style="background-color:[gui_color]" value="[id] [selected]">[title]</option>
            [ENDBLOCK USERSEARCH]
        </select>
        [ENDIF ONESEARCH]
        <input title="[TEXT:Send search]" onclick="SendSimpleSearch(event);return false" type="button" value="[TEXT:Go]">

        <table class="transparent" cellspacing="0" width="100%">
            <tr>
                <td align="left" width="30px">
                    <a
                href="?app=[APPNAME]&amp;action=GENERIC_LIST&amp;tab=[tab]&amp;page=[prev]&amp;dirid=[dirid]&catg=[catg]&amp;amid=[famid][pds]">[previcon]</a>
                </td>
                <td align="center"> <i><b>[fldtitle]</b></i>
                </td>
                [IF hasNext]
                <td align="right" width="30px">
                    <a
                href="?app=[APPNAME]&amp;action=GENERIC_LIST&amp;tab=[tab]&amp;page=[next]&amp;dirid=[dirid]&amp;catg=[catg]&amp;famid=[famid][pds]">[nexticon]</a>
                </td>
                [ENDIF hasNext]
            </tr>
        </table>

        <table class="transparent" width="100%" cellpadding="0px" cellspacing="0px">
            <tr>
                [IF hasOnglet]
                <td id="letterTabs" width="1px" valign="top" cellspacing="0" cellpadding="0">
                    <table cellpadding="1px" cellspacing="1px">
                        [BLOCK ONGLET]
                        <tr>
                            <td class="[ongclass]" align="center"
                        onmouseover="if (className != 'onglets') {className='ongleth';}"
                        onmouseout="if (className != 'onglets') {className='onglet';}"
                        onclick="document.location.href='?app=[APPNAME]&amp;action=GENERIC_TAB&amp;onefam=[ONEFAMORIGIN]&amp;catg=[catg]&amp;tab=[ongdir]&amp;famid=[famid][pds]'">[onglabel]</td>
                        </tr>
                        [ENDBLOCK ONGLET]
                    </table>
                </td>
                [ENDIF hasOnglet]
                <td id="cellmain" valign="top">
                    [BLOCK TABLEBODY]
                    <!-- TABLEBODY -->
                    <div id="d[id]"
                         view="multidoc" documentId="[id]" hrefDoc='[CORE_STANDURL]&app=FDL&action=FDL_CARD&id=[id]'
                         style="width:[ACARD_WIDTH];float:left;cursor:crosshair;overflow:hidden;"
                         onclick="if (document.noselect) document.noselect=false; else {vselect(this);subwindow([FDL_VD2SIZE],[FDL_HD2SIZE],'[famtarget]','[CORE_STANDURL]&app=FDL&action=FDL_CARD&id=[id]');}"
                         oncontextmenu="viewdocmenu(event,'[id]',false,false,this);return false;"
                         class="docresume">
                        [IFNOT canedit]
                        <img align="right" width="30px" id="ic[id]" documentId="[id]"
                         hrefDoc='?app=GENERIC&amp;action=GENERIC_EDIT&amp;latest=Y&amp;id=[id]'
                         needresize="1" src="[iconsrc]" class="aiconnoh" />
                        [ENDIF canedit]
                        [IF canedit]
                        <img align="right" width="30px" id="ic[id]" documentId="[id]"
                         hrefDoc='?app=GENERIC&amp;action=GENERIC_EDIT&amp;latest=Y&amp;id=[id]'
                         needresize="1" src="[iconsrc]" class="aicon" title="[TEXT:Modify]"
                        onclick="document.noselect=true;vselect(this.parentNode);vedit(event,'[id]');"/>
                        [ENDIF canedit]
                        <img align="right" title="[emblemt]" src="[emblem]" width="20px"/>
                        [IF postitid]
                        <img align="right" needresize="1" src="[IMG:stickynotes.png]" width="20px"/>
                        [ENDIF postitid]
                        [IF inDomain]
                        <img align="right" needresize="1" src="[IMG:domainsync.png]" width="20px"/>
                        [ENDIF inDomain]
                        [IF forumid]
                        <img align="right" needresize="1" src="[IMG:forum.png]" width="20px"/>
                        [ENDIF forumid]
                        <a class="title" style="float:left;" id="t[id]">[title]</a>
                        <i class="statetext" style="float:right;border-color:[statecolor];">[state]</i>
                        <div style="clear:both"></div>
                        [ABSTRACTVALUES]
                    </div>
                    [ENDBLOCK TABLEBODY]
                    <br/>
                    <!-- /TABLEBODY --> </td>
            </tr>
        </table>
        <table class="transparent" cellspacing="0" width="100%">
            <tr>
                <td align="left">
                    <a
                href="?app=[APPNAME]&amp;action=GENERIC_LIST&amp;tab=[tab]&amp;page=[prev]&amp;dirid=[dirid]&amp;catg=[catg]&amp;onglet=[onglet]&amp;famid=[famid][pds]">[previcon]</a>
                </td>
                [IF hasNext]
                <td align="right">
                    <a
                href="?app=[APPNAME]&amp;action=GENERIC_LIST&amp;tab=[tab]&amp;page=[next]&amp;dirid=[dirid]&amp;catg=[catg]&amp;onglet=[onglet]&amp;famid=[famid][pds]">[nexticon]</a>
                </td>
                [ENDIF hasNext]
            </tr>
        </table>
    </div>
    <!--  FOOT HTML -->

</body>
</html>