[ZONE FDL:HTMLHEAD?title=[TEXT:Edit help]]
<script type="text/javascript" src="lib/data/fdl-data.js"></script>
<style type="text/css">
#help-menu {
	overflow: hidden;
	padding: 5px 10px;
}
#help-menu strong {
	font-size: 16px;
}
#help-menu div {
	float: right;
}
#help-menu img {
	border: 1px solid [CORE_BGCOLOR];
	padding: 0 3px;
}
#help-menu a {
	outline: 0;
}
fieldset legend img {
	vertical-align: middle;
	padding-right: 4px;
}
#help-menu a:hover {
	background: [CORE_BGCOLOR];
}
</style>

<div id="help-menu">
	<strong>[DOCTITLE]</strong>
	<div>
[BLOCK HELPLANGS2]
	<a href="#[LANGKEY]" title="[LANGNAME]" onclick="return view_lang('[LANGKEY]')"><img src="[IMG:flags/[LANGISO].png|16]" title="[LANGNAME]" width="16" height="16" /></a>
[ENDBLOCK HELPLANGS2]
	</div>
</div>

[BLOCK HELPLANGS1]
<div id="help-[LANGKEY]" style="display:[LANGDISPLAY]">
	<fieldset><legend><img src="[IMG:flags/[LANGISO].png|16]" title="[LANGNAME]" width="16" height="16" /> [LANGNAME]</legend>
		<table style="width:100%" cellspacing="0" class="edittable">
			<tr>
				<td class="FREEDOMLabel" width="20%"><span >[TEXT:Help name]&nbsp:&nbsp;</span></td>
				<td>[INPUTLANGNAME]</td>
			</tr>
			<tr>
				<td class="FREEDOMLabel" width="20%"><span >[TEXT:Help description]&nbsp:&nbsp;</span></td>
				<td id="help-description">[INPUTLANGDESCRIPTION]</td>
			</tr>
			<tr>
				<td class="FREEDOMLabel" width="20%"></td>
				<td>
					<input class="normal" type="button" title="[TEXT:Apply]" value="[TEXT:Apply]" onclick="return help_edit_apply();" />
					<input class="normal" type="button" title="[TEXT:Cancel]" value="[TEXT:Cancel]" onclick="return help_edit_cancel();" />
				</td>
			</tr>
		</table>
	</fieldset>
</div>
[ENDBLOCK HELPLANGS1]



<script type="text/javascript">
var LANGS = [JSONLANGS];
function help_edit_apply() {
	Ih.docClearTableRow('help_t_help');
	for (var k in LANGS) {
		var name = document.getElementById('help_name_'+lang_to_index(k)).value;
		var description = document.getElementById('help_description_'+lang_to_index(k)).value;
		alert(k+"\n----\n["+name+"]\n----\n["+description+"]");
		if(name || description) {
			Ih.docAddTableRow({
				'help_lang': k,
				'help_name': name,
				'help_description': description
			});
		}
	}
}
function help_edit_cancel() {
	window.close();
}
function lang_to_index(lang) {
	var i = 0;
	for (var k in LANGS) {
		if(lang == k) { return i; }
		i++;
	}
}
function view_lang(lang) {
	for (var k in LANGS) {
		if(lang == k) {
			document.getElementById('help-'+k).style.display = 'block';
		}
		else {
			document.getElementById('help-'+k).style.display = 'none';
		}
	}
}
function help_edit_load() {
	var help_langs = Ih.docGetFormValue('help_lang');
	var help_names = Ih.docGetFormValue('help_name');
	var help_descriptions = Ih.docGetFormValue('help_description');
	if(help_langs) {
		for(var i=0; i < help_langs.length; i++) {
			var input_name = document.getElementById('help_name_'+lang_to_index(help_langs[i]));
			var input_description = document.getElementById('help_description_'+lang_to_index(help_langs[i]));
			if(input_name && input_description) {
				input_name.value = help_names[i];
				input_description.value = help_descriptions[i];
			}
		}
	}
}
addEvent(window,"load",help_edit_load);
</script>
[ZONE FDL:HTMLFOOT]
